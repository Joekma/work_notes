
一 windows 路由表条目解释

1 使用ipconfig /all 查看网卡信息
2 使用route print 查看路由表
3 路由表信息解释
    名词解释：
    Active Routes：活动的路由
    Network destination ：目的网段
    Netmask：子网掩码
    Gateway：网关，又称下一跳路由器。在发送IP数据包时，网关定义了针对特定的网络目的地址，数据包发送到的下一跳服务器。如果是本地计算机直接连接到的网络，网关通常是本地计算机对应的网络接口，但是此时接口必须和网关一致；如果是远程网络或默认路由，网关通常是本地计算机所连接到的网络上的某个服务器或路由器。
    Interface：接口，接口定义了针对特定的网络目的地址，本地计算机用于发送数据包的网络接口。网关必须位于和接口相同的子网（默认网关除外），否则造成在使用此路由项时需调用其他路由项，从而可能会导致路由死锁。
    Metric：跳数，跳数用于指出路由的成本，通常情况下代表到达目标地址所需要经过的跳跃数量，一个跳数代表经过一个路由器。跳数越低，代表路由成本越低，优先级越高。
    Persistent Routes：手动配置的静态固化路由



2）第一条路由信息：缺省路由
当系统接收到一个目的地址不在路由表中的数据包时，系统会将该数据包通过192.168.99.8这个接口发送到缺省网关192.168.99.1。
3）第二条路由信息：本地环路
当系统接收到一个发往目标网段127.0.0.0的数据包时，系统将接收发送给该网段的所有数据包。
4）第三条路由信息：直连网段的路由记录
当系统接收到一个发往目的网段192.168.99.0/24的数据包时，系统会将该数据包通过192.168.99.8这个接口发送出去。
5）第四条路由信息：本地主机路由
当系统接收到一个目标ip地址为本地网卡ip地址的数据包时，系统会将该数据包收下。
6）第五条路由信息：本地广播路由
当系统接收到一个发给直连网段的本地广播数据包时，系统会将该数据包从192.168.99.8这个接口以广播的形式发送出去。
7）第六条路由信息：组播路由
当系统接收到一个组播数据包时，系统会将该数据包从192.168.99.8这个接口以组播的形式发送出去。
8）第七条路由信息：广播路由
在系统接收到一个绝对广播数据包时，系统会将该数据包通过192.168.99.8这个接口发送出去。
9）Default Gateway（缺省网关）




windows路由表操作

windows路由表的设置主要通过route命令，ROUTE命令格式如下：
ROUTE [-f] [-p] [command [destination] [MASK netmask] [gateway] [METRIC metric] [IF interface]
其中 –f 参数用于清除路由表，-p参数用于永久保留某条路由（即在系统重启时不会丢失路由）。
Command主要有PRINT（打印）、ADD（添加）、DELETE（删除）、CHANGE（修改）共4个命令。
Destination代表所要达到的目标IP地址。
MASK是子网掩码的关键字。Netmask代表具体的子网掩码，如果不加说明，默认是255.255.255.255（单机IP地址）。如果代表全部出口子网掩码可用0.0.0.0。
Gateway代表出口网关。
其他interface和metric分别代表特殊路由的接口数目和到达目标地址的跳数，一般默认。



双网卡配置实例

    1 网络环境
         有线：可连接公司内网，不能连接Internet
         无线：可连接Internet，不能连接公司内网  默认网关为 192.168.0.1

    2 我们的目的就是同时连接这两个网络，并自动选择路由实现内外网都可以访问

    3   删除默认设置
        route delete 0.0.0.0
        外网路由，全走无线
        route add 0.0.0.0 mask 0.0.0.0 192.168.0.1 –p
        公司内网全部在10.108.*.*网段，增加此路由
        route add 10.108.0.0 mask 255.255.0.0 10.108.58.1 -p

    4 用ping命令分别检查内外网连接


    5 补充

        一   通过一个实例来理解路由与路由表
             下图共有两个不同的网段分别是NetworkA与NetworkB，这两个网段是通过一个路由器（Server A）来进行数据传递，那么当PC01这台主机想要传送数据到PC11时，它的IP数据包该如何传输？

             应用分析
                NetworkA（192.168.0.0/24）与NetworkB（192.169.1.0/24）是不同的网段，所以PC01与PC11是不能直接传递数据的。当主机要发送数据时，它主要参考是路由表，分析过程如下。
                1、查询IP数据包的目标IP地址
                     当PC01有IP数据包发送时，主要会查阅IP数据包报头的目标IP地址。
                2、查询PC01的路由表
                     PC01主机会分析自己的路由表，当发现目标IP与本机IP在同一网段，则PC01会直接通过局域网，将数据直接传送到目的主机。
                3、查询默认路由
                     因为PC01与PC11不在同一网络，因此PC01会分析路由表当中是否有其他相符合的路由设置值，如果没有，就直接将IP数据包发送到默认路由当中去，在本应用中，Default Gateway是Server A这台。
                4、送出数据包到Default Gateway后，不理会数据包流向
                     当IP由PC01送给Server A之后，PC01就不理会接下来的工作，而Server A接收到这个数据包后，会依据上面的流程，也分析自己的路由表，然后向后继续传输到正确的目的主机上面。

        二   路由表的选路原则、
            路由表的基本查找方法是：

                搜索路由表，寻找与目的IP地址完全匹配的表目。如果找到，则把报文发送给该表目指定的下一站路由器或直接相连的网络接口

                搜索路由表，寻找与目的IP地址网络号匹配的表目。如果找到，则把报文发送给该表目指定的下一站路由器或直接相连的网络接口

                搜索路由表，寻找“默认（default）”表目。如果找到，则把报文发送给该表目指定的下一站路由器

                这是最基本的情况，但实际使用时的情况更加复杂，比如当一个目标地址被多个目标网络所覆盖以及一个目标网络的多种路由协议的多条路径共同存在的时候，或者是同一目标网络同一路由器的多条路径共同存在的时候，路由器的转发原则是什么？

            想要从多条可选路由表项中选择最优的路径，必须有一个衡量标准，管理距离AD就是所有衡量标准中的一个

            管理距离（AD）：

                管理距离是指提供路由可信度的一个参考值，如果管理距离越小，路由条目越可靠。这就是说，较小管理距离的路由条目优先于较大的条目。
                管理距离的取值范围为0-255，0最可信，255最不可信。假如一台路由器收到同一网络的两条路由更新，路由器会选择管理距离最小的那条，放入路由表


            路由选路原则：
                先进行最长匹配原则，满足后进行管理距离最小优先，依旧满足进行度量值最小优先

                A: 最长匹配原则：最长匹配原则是CISCO IOS路由器默认的路由查找方式。当路由器收到一个IP数据包时，会将数据包的目的IP地址与自己本地路由表中的表项进行bit by bit的逐位查找，直到找到匹配度最长的条目，这叫最长匹配原则。

                B: 管理距离AD最小优先：可以是多种路由协议的比较；也可以是同种路由协议的比较，比如双线出口所配置的两条默认浮动路由比较

                C：度量值metric最小优先：路由协议不同则度量值不能做比较，比如rip度量值为跳数；ospf度量值为带宽；eigrp度量值为带宽+延迟等。所以在不同种协议之间先比较管理距离


        三  ip地址分类与特殊ip
            https://blog.csdn.net/qq_38410730/article/details/80980749